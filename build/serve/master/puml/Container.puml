@startuml
set separator none
title Example E-Commerce Store - Containers

top to bottom direction

!include <C4/C4>
!include <C4/C4_Context>
!include <C4/C4_Container>

Person(Customer, "Customer", $descr="", $tags="", $link="")
Person(WarehouseStaff, "Warehouse Staff", $descr="", $tags="", $link="")
System(EmailSystem, "Email System", $descr="Sendgrid", $tags="", $link="")

System_Boundary("ExampleECommerceStore_boundary", "Example E-Commerce Store", $tags="") {
  Container(ExampleECommerceStore.API, "API", $techn="ASP.NET Core", $descr="Backend", $tags="", $link="")
  Container(ExampleECommerceStore.WebAppSPA, "Web App SPA", $techn="Angular", $descr="E-Commerce Store", $tags="", $link="")
  Container(ExampleECommerceStore.StockManagementPortalSPA, "Stock Management Portal SPA", $techn="Angular", $descr="Order fulfillment, stock management, order dispatch", $tags="", $link="")
  ContainerDb(ExampleECommerceStore.Database, "Database", $techn="SQL Server", $descr="Customers, Orders, Payments", $tags="", $link="")
}

Rel(Customer, ExampleECommerceStore.WebAppSPA, "Places Orders", $techn="https", $tags="", $link="")
Rel(WarehouseStaff, ExampleECommerceStore.StockManagementPortalSPA, "Dispatches Orders", $techn="https", $tags="", $link="")
Rel(ExampleECommerceStore.API, EmailSystem, "Trigger emails", $techn="https", $tags="", $link="")
Rel(EmailSystem, Customer, "Delivers emails", $techn="https", $tags="", $link="")
Rel(ExampleECommerceStore.StockManagementPortalSPA, ExampleECommerceStore.API, "uses", $techn="https", $tags="", $link="")
Rel(ExampleECommerceStore.WebAppSPA, ExampleECommerceStore.API, "uses", $techn="https", $tags="", $link="")
Rel(ExampleECommerceStore.API, ExampleECommerceStore.Database, "persists data", $techn="https", $tags="", $link="")

SHOW_LEGEND(true)
@enduml